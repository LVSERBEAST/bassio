<div class="highway-container">
  <div class="highway-track">
    @for (string of strings; track string; let i = $index) {
    <div class="string-lane" [attr.data-string]="string">
      <span class="string-label">{{ string }}</span>
      <div class="lane-line"></div>
    </div>
    } @for (marker of beatGrid(); track marker.id) {
    <div class="beat-marker" [style.left.%]="marker.position">
      <span class="beat-number">1</span>
    </div>
    }

    <div class="hit-zone" [style.left.%]="hitZonePosition()" [class.flash]="player.hitZoneFlash()">
      <div class="drag-handle" (mousedown)="onDragStart($event)">
        <span class="grip-line"></span>
        <span class="grip-line"></span>
        <span class="grip-line"></span>
      </div>
    </div>

    @for (note of notes(); track note.id) {
    <div
      class="note"
      [class.approaching]="note.state === 'approaching'"
      [class.perfect]="note.state === 'perfect'"
      [class.miss]="note.state === 'miss'"
      [style.left.%]="note.position"
      [style.top]="'calc(' + note.string * 25 + '% + 0.75rem)'"
    >
      <span class="fret-num">{{ note.fret }}</span>
    </div>
    } @if (player.countdown() > 0) {
    <div class="countdown-overlay">
      <div class="countdown-number">{{ player.countdown() }}</div>
    </div>
    }
  </div>
</div>
